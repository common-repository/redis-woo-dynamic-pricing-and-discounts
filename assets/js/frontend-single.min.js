jQuery(document).ready((function(){"use strict";if(jQuery(document).on("show_variation viwpvs_show_variation","form.cart,.variations_form",(function(i,e){e.viredis_pricing_table?jQuery(this).closest(viredis_single.product_content_wrap).find(".viredis-pricing-table-wrap").replaceWith(e.viredis_pricing_table):jQuery(this).closest(viredis_single.product_content_wrap).find(".viredis-pricing-table-wrap").addClass("viredis-hidden"),viredis_single.pd_dynamic_price&&jQuery(this).find('input[name="quantity"]').trigger("change")})),jQuery(document).on("hide_variation viwpvs_hide_variation","form.cart,.variations_form",(function(){jQuery(this).closest(viredis_single.product_content_wrap).find(".viredis-pricing-table-wrap").addClass("viredis-hidden"),jQuery(this).data("viredis_old_price")&&jQuery(this).closest(viredis_single.product_content_wrap).find(".viredis_current_price").html(jQuery(this).data("viredis_old_price"))})),viredis_single.pd_dynamic_price){let i;jQuery(document.body).on("wc_fragments_refreshed added_to_cart removed_from_cart",(function(){jQuery('form.cart input[name="quantity"]').trigger("change")})),jQuery(document).on("change",'form.cart input[name="quantity"]',(function(){i&&clearTimeout(i);let e,r,t=jQuery(this).closest("form"),n=jQuery(this).closest(viredis_single.product_content_wrap),d=jQuery(this).val();if(!d||"0"===d)return!1;if(t.find("[name=variation_id]").length?(r=t.find("input[name=variation_id]").val(),e=t.find(".price")):r=t.find("[name=product_id]").length?t.find("input[name=product_id]").val():t.find('[name="add-to-cart"]').val(),r=parseInt(r),!r)return!1;if(e&&e.length||(e=n.find(".price")),!e.length)return!1;e.addClass("viredis_current_price"),t.data("viredis_old_price")||t.data("viredis_old_price",e.html());let a={product_id:r,qty:d,viredis_nonce:viredis_single.nonce};i=setTimeout((function(i,r){jQuery.ajax({url:viredis_single.wc_ajax_url.toString().replace("%%endpoint%%","viredis_get_dynamic_price_html"),type:"POST",data:i,dataType:"json",beforeSend:function(){r.find(".single_add_to_cart_button").attr("disabled","disabled")},success:function(i){r.find(".single_add_to_cart_button").removeAttr("disabled"),"success"===i.status?e.html(i.price_html):(e.html(r.data("viredis_old_price")),r.data("viredis_old_price",""))},error:function(i){console.log(i)}})}),500,a,t)}))}}));